<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
			// 创建生成器函数
			function * fn(){
				console.log('这是一个生成器函数')
			}
			// 调用生成器函数
			let res = fn();
			// console.log(res);
			// 调用next才会执行函数中的方法
			// console.log(res.next());
			
			
			// 创建生成器函数
			// yield 是分隔符 后面可以跟字面值或表达式
			function * fn2(){
				yield 'aaa';
				yield 123;
				yield true;
			}
			for(let v of fn2()){
				console.log(v)
			}
			
			
			// 生成器函数参数传递
			// 参数传递 可以在函数调用时 整体传递参数 也可以通过next传递参数
			// 创建生成器函数
			function * fn3(o){
				console.log(o);
				let a1 = yield 111;
				console.log(a1);
				let a2 = yield true;
				console.log(a2);
				let a3 = yield 'FFF'
				console.log(a3);
			}
			let r = fn3('AAA');
			console.log(r.next('DDD'))
			console.log(r.next('EEE'))
			console.log(r.next('GGG'))
			
			
			// 浏览器控制台 1s后输出111 然后 2s后输出222 在然后 3s后输出333
			// 实现方式1 setTimeout 嵌套
			// setTimeout(()=>{
			// 	console.log(111);
			// 	setTimeout(()=>{
			// 		console.log(222);
			// 		setTimeout(()=>{
			// 			console.log(333);
			// 		},3000);
			// 	},2000);
			// },1000);
			// 实现方式2 生成器函数
			// function f1(){
			// 	setTimeout(()=>{
			// 		console.log(111)
			// 		car.next();
			// 	},1000)
			// }
			// function f2(){
			// 	setTimeout(()=>{
			// 		console.log(222)
			// 		car.next();
			// 	},2000)
			// }
			// function f3(){
			// 	setTimeout(()=>{
			// 		console.log(333)
			// 		car.next();
			// 	},3000)
			// }
			// // 创建生成器函数
			// function * fR(){
			// 	yield f1();
			// 	yield f2();
			// 	yield f3();
			// }
			// // 调用生成器函数
			// let car = fR();
			// car.next();
			
			// 模拟获取数据 按顺序分别获取 用户，订单，商品数据
			// 注意 一定是按照先后顺序获取的
			function getUser(){
				setTimeout(()=>{
					let data = '用户数据';
					car2.next(data);// next传递参数
				},1000);
			}
			function getOrder(){
				setTimeout(()=>{
					let data = '订单数据';
					car2.next(data);
				},1000);
			}
			function getGoods(){
				setTimeout(()=>{
					let data = '商品数据';
					car2.next(data);
				},1000);
			}
			
			function * gen(){
				let user = yield getUser();
				console.log(user);
				let order = yield getOrder();
				console.log(order);
				let goods = yield getGoods();
				console.log(goods);
			}
			let car2 = gen();
			car2.next();
			
			
		</script>
	</body>
</html>